{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../../../../Services/user\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_ng_container_13_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"option\", 15);\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const i_r5 = i0.ɵɵnextContext().index;\n    const ctx_r6 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"value\", ctx_r6.examenes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r6.examenes[i_r5 + 1]);\n  }\n}\nfunction ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_ng_container_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_ng_container_13_ng_container_1_Template, 3, 2, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const i_r5 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r5 % 3 === 0);\n  }\n}\nfunction ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_tr_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"tr\")(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const item_r8 = ctx.$implicit;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(item_r8);\n  }\n}\nfunction ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_button_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r10 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_button_24_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r10);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.Finalizar());\n    });\n    i0.ɵɵtext(1, \"Finalizar\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"h4\", 4);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵnamespaceSVG();\n    i0.ɵɵelementStart(6, \"svg\", 5);\n    i0.ɵɵlistener(\"click\", function ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_Template__svg_svg_click_6_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.chow = false);\n    });\n    i0.ɵɵelement(7, \"line\", 6)(8, \"line\", 7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵnamespaceHTML();\n    i0.ɵɵelementStart(9, \"div\", 8)(10, \"label\", 9);\n    i0.ɵɵtext(11, \"Selecione un examen para agregar\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"select\", 10);\n    i0.ɵɵlistener(\"ngModelChange\", function ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_Template_select_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.selectedOption = $event);\n    });\n    i0.ɵɵtemplate(13, ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_ng_container_13_Template, 2, 1, \"ng-container\", 11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(14, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_Template_button_click_14_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r14.AgregarExamenSeleccionado());\n    });\n    i0.ɵɵtext(15, \"Agregar Examen seleccionado\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"table\")(17, \"thead\")(18, \"tr\")(19, \"th\");\n    i0.ɵɵtext(20, \"Examenes Agregados:\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(21, \"tbody\");\n    i0.ɵɵtemplate(22, ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_tr_22_Template, 3, 1, \"tr\", 11);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 13);\n    i0.ɵɵtemplate(24, ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_button_24_Template, 2, 0, \"button\", 14);\n    i0.ɵɵelementEnd()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate1(\" Agregar Examenes a la Solicitud a: \", ctx_r0.datos.Nombre, \" \");\n    i0.ɵɵadvance(7);\n    i0.ɵɵproperty(\"ngModel\", ctx_r0.selectedOption);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.examenes);\n    i0.ɵɵadvance(9);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r0.ExamenesAgregados);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.proteccionExamen);\n  }\n}\nexport class ModalAgregarExamenesSolicitudPacientesComponent {\n  constructor(http, UserService) {\n    this.http = http;\n    this.UserService = UserService;\n    this.cerrado = new EventEmitter();\n    this.IdSolicitud = \"\";\n    this.proteccionExamen = false;\n    this.mensaje = true;\n    this.chow = false;\n    this.arreglo = [];\n    this.MensajeDeConfirmacion = false;\n  }\n  ngOnInit() {}\n  Mostrar(datos) {\n    this.datos = datos;\n    this.chow = true;\n    this.subscribirse();\n    this.CrearSolicitudIncompleta();\n  }\n  subscribirse() {\n    this.getExamenes().subscribe(examen => {\n      this.examenes = examen;\n    });\n    this.getExamenesAgregados().subscribe(examen => {\n      this.ExamenesAgregados = examen;\n    });\n  }\n  getExamenes() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=obtenerExamenesDelLabParaSolicitud&IdLab=' + this.datos.Id;\n    return this.http.get(url);\n  }\n  getExamenesAgregados() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesSolicitudes?accion=obtenerExamenesSolicitud&IdSolicitud=' + this.IdSolicitud;\n    return this.http.get(url);\n  }\n  //Crear la solicitud incompleta:\n  CrearSolicitudIncompleta() {\n    const Idlab = this.datos.Id;\n    const idUsuario = this.UserService.getId();\n    const body = {\n      Idlab: this.datos.Id\n    };\n    const url = `http://localhost:8080/Proyecto2Clinica/ControladorSolicitudes?accion=CrearSolicitud&Estado=INCOMPLETO&Idlab=${Idlab}&idUsuario=${idUsuario}`;\n    this.http.post(url, this.datos, {\n      responseType: 'text'\n    }).subscribe(respuesta => {\n      this.IdSolicitud = respuesta;\n      console.log(respuesta);\n    });\n  }\n  AgregarExamenSeleccionado() {\n    if (this.mensaje) {\n      alert('Recuerde que una vez agregue el examen se le debitará el dinero, así que este seguro de los examenes que agrega');\n      this.mensaje = false;\n      console.log(this.selectedOption);\n    } else {\n      this.arreglo = this.selectedOption.split(\",\");\n      const IdPaciente = this.UserService.getId();\n      const IdExamen = this.arreglo[0];\n      const IdSolicitud = this.IdSolicitud;\n      const Precio = this.arreglo[2];\n      const body = {\n        Nombre: this.arreglo\n      };\n      this.http.post(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesSolicitudes?accion=subirSolicitudExamen&IdPaciente=${IdPaciente}&IdExamen=${IdExamen}&IdSolicitud=${IdSolicitud}&Precio=${Precio}`, body).subscribe(response => {\n        alert('Se agrego el examen a la solicitud con exito');\n        this.subscribirse();\n        this.proteccionExamen = true;\n        // Actualizar la lista de especialidades agregadas\n      }, error => {\n        if (error.status === 400) {\n          alert('No se encontro el examen pedido');\n        } else if (error.status === 409) {\n          alert('No cuentas con el dinero suficiente para pedir este examen');\n        }\n      });\n    }\n  }\n  Finalizar() {\n    if (this.MensajeDeConfirmacion) {\n      const idSoli = this.IdSolicitud;\n      const body = {\n        idSoli: idSoli\n      };\n      this.http.put(`http://localhost:8080/Proyecto2Clinica/ControladorSolicitudes?accion=OficializarSolicitud&IdSolicitud=${idSoli}`, body).subscribe(response => {\n        alert('Se envio la solicitud con exito');\n        this.chow = false;\n        this.cerrado.emit();\n      }, error => {\n        if (error.status === 400) {\n          alert('Error al actualizar la solicitud');\n        } else {\n          alert('Error al actualizar');\n        }\n      });\n    } else {\n      alert(\"Recuerda que luego no podras agregar más examenes a la solicitud, si ya acabaste presiona finalizar otra vez\");\n      this.MensajeDeConfirmacion = true;\n    }\n  }\n}\nModalAgregarExamenesSolicitudPacientesComponent.ɵfac = function ModalAgregarExamenesSolicitudPacientesComponent_Factory(t) {\n  return new (t || ModalAgregarExamenesSolicitudPacientesComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.UserService));\n};\nModalAgregarExamenesSolicitudPacientesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ModalAgregarExamenesSolicitudPacientesComponent,\n  selectors: [[\"app-modal-agregar-examenes-solicitud-pacientes\"]],\n  outputs: {\n    cerrado: \"cerrado\"\n  },\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [1, \"modalC\"], [1, \"modalC-content\"], [1, \"modalc-header\"], [1, \"modalc-title\"], [\"xmlns\", \"http://www.w3.org/2000/svg\", \"viewBox\", \"0 0 24 24\", \"fill\", \"none\", \"stroke\", \"black\", \"stroke-width\", \"2\", \"stroke-linecap\", \"round\", \"stroke-linejoin\", \"round\", 3, \"click\"], [\"x1\", \"18\", \"y1\", \"6\", \"x2\", \"6\", \"y2\", \"18\"], [\"x1\", \"6\", \"y1\", \"6\", \"x2\", \"18\", \"y2\", \"18\"], [1, \"modalC-container\"], [\"for\", \"especialidad\"], [\"name\", \"selectedOption\", 3, \"ngModel\", \"ngModelChange\"], [4, \"ngFor\", \"ngForOf\"], [3, \"click\"], [1, \"botones\"], [3, \"click\", 4, \"ngIf\"], [3, \"value\"]],\n  template: function ModalAgregarExamenesSolicitudPacientesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ModalAgregarExamenesSolicitudPacientesComponent_ng_container_0_Template, 25, 5, \"ng-container\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.chow);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgModel],\n  styles: [\".modalC[_ngcontent-%COMP%] {\\r\\n    position: fixed;\\r\\n    top: 0;\\r\\n    left:0;\\r\\n    width: 100%;\\r\\n    height: 100vh;\\r\\n    padding: 16px;\\r\\n    background: rgba(0, 0, 0, 0.75);\\r\\n    display: flex;\\r\\n    align-items: center;\\r\\n    justify-content: center;\\r\\n    overflow-y: auto;\\r\\n    z-index: 200;\\r\\n  }\\r\\n.modalC-content[_ngcontent-%COMP%]{\\r\\n  width: 100%;\\r\\n  max-width: 500px;\\r\\n}\\r\\n.modalc-header[_ngcontent-%COMP%] {\\r\\n  height: 93px;\\r\\n  display: flex;\\r\\n  align-items: center;\\r\\n  justify-content: space-between;\\r\\n  padding: 0 32px;\\r\\n  background-color:#eccb8f;\\r\\n  background-image: radial-gradient(circle at center center,#e6e6e6,#ffffff) repeating-radial-gradient((circle at center center, #e6e6e6 ,#e6e6e6,20px,transparent 40px,transparent 20px));\\r\\n  background-blend-mode: multiply;\\r\\n  background-Size: cover;\\r\\n  background-position:center;\\r\\n  border-radius: 4px 4px 0 0;\\r\\n}\\r\\nselect[_ngcontent-%COMP%]{\\r\\n  padding: 10px;\\r\\n  margin-bottom: 20px;\\r\\n  width: 100%;\\r\\n  border: 1px solid #ccc;\\r\\n  border-radius: 5px;\\r\\n  border: 2px solid black;\\r\\n}\\r\\n  svg[_ngcontent-%COMP%]{\\r\\n    height:45px;\\r\\n    width: 45px;\\r\\n  }\\r\\n  svg[_ngcontent-%COMP%]:hover {\\r\\n    cursor: pointer;\\r\\n    opacity: 0.75;\\r\\n}\\r\\n.modalc-title[_ngcontent-%COMP%]{\\r\\n  font-size: 24px;\\r\\n  font-weight: 600;\\r\\n  color: black;\\r\\n}\\r\\n.modalC-container[_ngcontent-%COMP%]{\\r\\n  padding: 32px;\\r\\n  background: #fff;\\r\\n  border-radius: 0 0 4px 4px;\\r\\n  display: flex;\\r\\n  flex-direction: column;\\r\\n}\\r\\n.botones[_ngcontent-%COMP%]{\\r\\n  display: flex;\\r\\n  width: 100%;\\r\\n  height: 100%;\\r\\n  justify-content:space-between;\\r\\n  align-items: center;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n  padding: 10px 20px;\\r\\n  border: none;\\r\\n  border-radius: 5px;\\r\\n  color: #000000;\\r\\n  cursor: pointer;\\r\\n  transition: all 0.3s ease;\\r\\n  background-color: rgb(246, 255, 123);\\r\\n  border: 2px solid black;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%]:hover{\\r\\n  background-color: rgb(156, 160, 88);\\r\\n}\\r\\ntable[_ngcontent-%COMP%] {\\r\\n  border-collapse: collapse;\\r\\n  width: 100%;\\r\\n  margin-bottom: 20px;\\r\\n  font-size: 16px;\\r\\n}\\r\\n\\r\\nth[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n  padding: 12px;\\r\\n  text-align: left;\\r\\n  border-bottom: 1px solid #ddd;\\r\\n}\\r\\n\\r\\nth[_ngcontent-%COMP%] {\\r\\n  background-color: #f2f2f2;\\r\\n  font-weight: bold;\\r\\n}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ29tcG9uZW50ZXMvaG9tZS1wYWNpZW50ZS9tZW51LXNvbGljaXR1ZGVzLWV4YW1lbmVzL21vZGFsLWFncmVnYXItZXhhbWVuZXMtc29saWNpdHVkLXBhY2llbnRlcy9tb2RhbC1hZ3JlZ2FyLWV4YW1lbmVzLXNvbGljaXR1ZC1wYWNpZW50ZXMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtJQUNJLGVBQWU7SUFDZixNQUFNO0lBQ04sTUFBTTtJQUNOLFdBQVc7SUFDWCxhQUFhO0lBQ2IsYUFBYTtJQUNiLCtCQUErQjtJQUMvQixhQUFhO0lBQ2IsbUJBQW1CO0lBQ25CLHVCQUF1QjtJQUN2QixnQkFBZ0I7SUFDaEIsWUFBWTtFQUNkO0FBQ0Y7RUFDRSxXQUFXO0VBQ1gsZ0JBQWdCO0FBQ2xCO0FBQ0E7RUFDRSxZQUFZO0VBQ1osYUFBYTtFQUNiLG1CQUFtQjtFQUNuQiw4QkFBOEI7RUFDOUIsZUFBZTtFQUNmLHdCQUF3QjtFQUN4Qix3TEFBd0w7RUFDeEwsK0JBQStCO0VBQy9CLHNCQUFzQjtFQUN0QiwwQkFBMEI7RUFDMUIsMEJBQTBCO0FBQzVCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsbUJBQW1CO0VBQ25CLFdBQVc7RUFDWCxzQkFBc0I7RUFDdEIsa0JBQWtCO0VBQ2xCLHVCQUF1QjtBQUN6QjtFQUNFO0lBQ0UsV0FBVztJQUNYLFdBQVc7RUFDYjtFQUNBO0lBQ0UsZUFBZTtJQUNmLGFBQWE7QUFDakI7QUFDQTtFQUNFLGVBQWU7RUFDZixnQkFBZ0I7RUFDaEIsWUFBWTtBQUNkO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLDBCQUEwQjtFQUMxQixhQUFhO0VBQ2Isc0JBQXNCO0FBQ3hCO0FBQ0E7RUFDRSxhQUFhO0VBQ2IsV0FBVztFQUNYLFlBQVk7RUFDWiw2QkFBNkI7RUFDN0IsbUJBQW1CO0FBQ3JCO0FBQ0E7RUFDRSxrQkFBa0I7RUFDbEIsWUFBWTtFQUNaLGtCQUFrQjtFQUNsQixjQUFjO0VBQ2QsZUFBZTtFQUNmLHlCQUF5QjtFQUN6QixvQ0FBb0M7RUFDcEMsdUJBQXVCO0FBQ3pCO0FBQ0E7RUFDRSxtQ0FBbUM7QUFDckM7QUFDQTtFQUNFLHlCQUF5QjtFQUN6QixXQUFXO0VBQ1gsbUJBQW1CO0VBQ25CLGVBQWU7QUFDakI7O0FBRUE7RUFDRSxhQUFhO0VBQ2IsZ0JBQWdCO0VBQ2hCLDZCQUE2QjtBQUMvQjs7QUFFQTtFQUNFLHlCQUF5QjtFQUN6QixpQkFBaUI7QUFDbkIiLCJzb3VyY2VzQ29udGVudCI6WyIubW9kYWxDIHtcclxuICAgIHBvc2l0aW9uOiBmaXhlZDtcclxuICAgIHRvcDogMDtcclxuICAgIGxlZnQ6MDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgaGVpZ2h0OiAxMDB2aDtcclxuICAgIHBhZGRpbmc6IDE2cHg7XHJcbiAgICBiYWNrZ3JvdW5kOiByZ2JhKDAsIDAsIDAsIDAuNzUpO1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIG92ZXJmbG93LXk6IGF1dG87XHJcbiAgICB6LWluZGV4OiAyMDA7XHJcbiAgfVxyXG4ubW9kYWxDLWNvbnRlbnR7XHJcbiAgd2lkdGg6IDEwMCU7XHJcbiAgbWF4LXdpZHRoOiA1MDBweDtcclxufVxyXG4ubW9kYWxjLWhlYWRlciB7XHJcbiAgaGVpZ2h0OiA5M3B4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgcGFkZGluZzogMCAzMnB4O1xyXG4gIGJhY2tncm91bmQtY29sb3I6I2VjY2I4ZjtcclxuICBiYWNrZ3JvdW5kLWltYWdlOiByYWRpYWwtZ3JhZGllbnQoY2lyY2xlIGF0IGNlbnRlciBjZW50ZXIsI2U2ZTZlNiwjZmZmZmZmKSByZXBlYXRpbmctcmFkaWFsLWdyYWRpZW50KChjaXJjbGUgYXQgY2VudGVyIGNlbnRlciwgI2U2ZTZlNiAsI2U2ZTZlNiwyMHB4LHRyYW5zcGFyZW50IDQwcHgsdHJhbnNwYXJlbnQgMjBweCkpO1xyXG4gIGJhY2tncm91bmQtYmxlbmQtbW9kZTogbXVsdGlwbHk7XHJcbiAgYmFja2dyb3VuZC1TaXplOiBjb3ZlcjtcclxuICBiYWNrZ3JvdW5kLXBvc2l0aW9uOmNlbnRlcjtcclxuICBib3JkZXItcmFkaXVzOiA0cHggNHB4IDAgMDtcclxufVxyXG5zZWxlY3R7XHJcbiAgcGFkZGluZzogMTBweDtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGJvcmRlcjogMXB4IHNvbGlkICNjY2M7XHJcbiAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xyXG59XHJcbiAgc3Zne1xyXG4gICAgaGVpZ2h0OjQ1cHg7XHJcbiAgICB3aWR0aDogNDVweDtcclxuICB9XHJcbiAgc3ZnOmhvdmVyIHtcclxuICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgIG9wYWNpdHk6IDAuNzU7XHJcbn1cclxuLm1vZGFsYy10aXRsZXtcclxuICBmb250LXNpemU6IDI0cHg7XHJcbiAgZm9udC13ZWlnaHQ6IDYwMDtcclxuICBjb2xvcjogYmxhY2s7XHJcbn1cclxuLm1vZGFsQy1jb250YWluZXJ7XHJcbiAgcGFkZGluZzogMzJweDtcclxuICBiYWNrZ3JvdW5kOiAjZmZmO1xyXG4gIGJvcmRlci1yYWRpdXM6IDAgMCA0cHggNHB4O1xyXG4gIGRpc3BsYXk6IGZsZXg7XHJcbiAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxufVxyXG4uYm90b25lc3tcclxuICBkaXNwbGF5OiBmbGV4O1xyXG4gIHdpZHRoOiAxMDAlO1xyXG4gIGhlaWdodDogMTAwJTtcclxuICBqdXN0aWZ5LWNvbnRlbnQ6c3BhY2UtYmV0d2VlbjtcclxuICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG59XHJcbmJ1dHRvbiB7XHJcbiAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gIGJvcmRlcjogbm9uZTtcclxuICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgY29sb3I6ICMwMDAwMDA7XHJcbiAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIHRyYW5zaXRpb246IGFsbCAwLjNzIGVhc2U7XHJcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NiwgMjU1LCAxMjMpO1xyXG4gIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xyXG59XHJcbmJ1dHRvbjpob3ZlcntcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2IoMTU2LCAxNjAsIDg4KTtcclxufVxyXG50YWJsZSB7XHJcbiAgYm9yZGVyLWNvbGxhcHNlOiBjb2xsYXBzZTtcclxuICB3aWR0aDogMTAwJTtcclxuICBtYXJnaW4tYm90dG9tOiAyMHB4O1xyXG4gIGZvbnQtc2l6ZTogMTZweDtcclxufVxyXG5cclxudGgsIHRkIHtcclxuICBwYWRkaW5nOiAxMnB4O1xyXG4gIHRleHQtYWxpZ246IGxlZnQ7XHJcbiAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XHJcbn1cclxuXHJcbnRoIHtcclxuICBiYWNrZ3JvdW5kLWNvbG9yOiAjZjJmMmYyO1xyXG4gIGZvbnQtd2VpZ2h0OiBib2xkO1xyXG59Il0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["EventEmitter","i0","ModalAgregarExamenesSolicitudPacientesComponent","constructor","http","UserService","ngOnInit","Mostrar","datos","chow","subscribirse","CrearSolicitudIncompleta","getExamenes","subscribe","examen","examenes","getExamenesAgregados","ExamenesAgregados","url","Id","get","IdSolicitud","Idlab","idUsuario","getId","body","post","responseType","respuesta","console","log","AgregarExamenSeleccionado","mensaje","alert","selectedOption","arreglo","split","IdPaciente","IdExamen","Precio","Nombre","response","proteccionExamen","error","status","Finalizar","MensajeDeConfirmacion","idSoli","put","cerrado","emit","selectors","outputs","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\branp\\Documents\\NetBeansProjects\\Proyecto2Clinica\\Angular\\ProyectoMedic\\src\\app\\Componentes\\home-paciente\\menu-solicitudes-examenes\\modal-agregar-examenes-solicitud-pacientes\\modal-agregar-examenes-solicitud-pacientes.component.ts","C:\\Users\\branp\\Documents\\NetBeansProjects\\Proyecto2Clinica\\Angular\\ProyectoMedic\\src\\app\\Componentes\\home-paciente\\menu-solicitudes-examenes\\modal-agregar-examenes-solicitud-pacientes\\modal-agregar-examenes-solicitud-pacientes.component.html"],"sourcesContent":["import { Component, EventEmitter, Output } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { UserService } from '../../../../../Services/user';\n@Component({\n  selector: 'app-modal-agregar-examenes-solicitud-pacientes',\n  templateUrl: './modal-agregar-examenes-solicitud-pacientes.component.html',\n  styleUrls: ['./modal-agregar-examenes-solicitud-pacientes.component.css']\n})\nexport class ModalAgregarExamenesSolicitudPacientesComponent {\n  @Output() cerrado = new EventEmitter();\n  datos: any;\n  protected IdSolicitud: string = \"\";\n  protected proteccionExamen = false;\n  protected mensaje = true;\n  public chow = false;\n  examenes: any;\n  public selectedOption: any;\n  protected arreglo : any[] = [];\n  ExamenesAgregados: any;\n  MensajeDeConfirmacion = false;\n  constructor(private http: HttpClient, private UserService:UserService  ) { }\n  ngOnInit() : void  {\n\n  }\n  Mostrar(datos: any){\n    this.datos = datos;\n    this.chow = true;\n    this.subscribirse();\n    this.CrearSolicitudIncompleta();\n  }\n  subscribirse(){\n    this.getExamenes().subscribe(examen => {\n      this.examenes = examen;\n    });\n    this.getExamenesAgregados().subscribe(examen => {\n      this.ExamenesAgregados = examen;\n    });\n  }\n  getExamenes() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=obtenerExamenesDelLabParaSolicitud&IdLab='+this.datos.Id;\n    return this.http.get<any[]>(url);\n  }\n  getExamenesAgregados(){\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesSolicitudes?accion=obtenerExamenesSolicitud&IdSolicitud='+this.IdSolicitud;\n    return this.http.get<any[]>(url);\n  }\n\n  //Crear la solicitud incompleta:\n  CrearSolicitudIncompleta(){\n    const Idlab = this.datos.Id;\n    const idUsuario = this.UserService.getId();\n    const body = {Idlab : this.datos.Id};\n    const url = `http://localhost:8080/Proyecto2Clinica/ControladorSolicitudes?accion=CrearSolicitud&Estado=INCOMPLETO&Idlab=${Idlab}&idUsuario=${idUsuario}`;\n    this.http.post(url, this.datos, {responseType: 'text'}).subscribe((respuesta: string) => {\n      this.IdSolicitud = respuesta;\n      console.log(respuesta);\n    });\n  }\n  AgregarExamenSeleccionado(){\n    if(this.mensaje){\n      alert('Recuerde que una vez agregue el examen se le debitará el dinero, así que este seguro de los examenes que agrega');\n      this.mensaje=false;\n      console.log(this.selectedOption);\n    }else{\n      this.arreglo = this.selectedOption.split(\",\");\n      const IdPaciente = this.UserService.getId();\n      const IdExamen = this.arreglo[0];\n      const IdSolicitud = this.IdSolicitud;\n      const Precio = this.arreglo[2];\n      const body = {Nombre: this.arreglo};\n      this.http.post(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesSolicitudes?accion=subirSolicitudExamen&IdPaciente=${IdPaciente}&IdExamen=${IdExamen}&IdSolicitud=${IdSolicitud}&Precio=${Precio}`, body).subscribe(\n        response => {\n          alert('Se agrego el examen a la solicitud con exito');\n          this.subscribirse();\n          this.proteccionExamen = true;\n          // Actualizar la lista de especialidades agregadas\n        },\n        error => {\n          if (error.status === 400) {\n            alert('No se encontro el examen pedido');\n          } else if(error.status === 409) {\n            alert('No cuentas con el dinero suficiente para pedir este examen');\n          }\n        }\n      );\n    }\n\n  }\n  Finalizar(){\n    if(this.MensajeDeConfirmacion){\n      const idSoli = this.IdSolicitud;\n      const body = { idSoli: idSoli };\n      this.http.put(`http://localhost:8080/Proyecto2Clinica/ControladorSolicitudes?accion=OficializarSolicitud&IdSolicitud=${idSoli}`, body).subscribe(\n        response => {\n          alert('Se envio la solicitud con exito');\n          this.chow = false;\n          this.cerrado.emit();\n        },\n        error => {\n          if (error.status === 400) {\n            alert('Error al actualizar la solicitud');\n          } else {\n            alert('Error al actualizar');\n          }\n        }\n      );\n    }else{\n      alert(\"Recuerda que luego no podras agregar más examenes a la solicitud, si ya acabaste presiona finalizar otra vez\");\n      this.MensajeDeConfirmacion = true;\n    }\n  }\n}\n\n","<ng-container *ngIf=\"chow\">\n    <div class=\"modalC\">\n        <div class=\"modalC-content\">\n            <div class=\"modalc-header\">\n                <h4 class=\"modalc-title\">\n                    Agregar Examenes a la Solicitud a: {{ datos.Nombre }}\n                </h4>\n                <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"black\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\" (click)=\"chow = false\">\n                    <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\" />\n                    <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\" />\n                </svg>\n            </div>\n            <!-- Cuerpo  -->\n                <div class=\"modalC-container\"> \n                    <label for=\"especialidad\">Selecione un examen para agregar</label>\n                    <select name=\"selectedOption\" [(ngModel)]=\"selectedOption\">\n                    <ng-container *ngFor=\"let dato of examenes; let i = index;\">\n                        <ng-container *ngIf=\"i % 3 === 0\">\n                        <option  [value]=\"examenes\">{{examenes[i+1]}}</option>\n                        </ng-container>\n                    </ng-container>\n                    </select>\n                    <button (click)=\" AgregarExamenSeleccionado()\">Agregar Examen seleccionado</button>\n                    <table>\n                        <thead>\n                          <tr>\n                            <th>Examenes Agregados:</th>\n                          </tr>\n                        </thead>\n                        <tbody>\n                          <tr *ngFor=\"let item of ExamenesAgregados\">\n                            <td>{{ item }}</td>\n                          </tr>\n                        </tbody>\n                      </table>\n                    <div class=\"botones\">\n                        <button *ngIf=\"proteccionExamen\" (click)=\"Finalizar()\">Finalizar</button>\n                    </div>\n                </div>\n            </div>\n        </div>          \n</ng-container>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}