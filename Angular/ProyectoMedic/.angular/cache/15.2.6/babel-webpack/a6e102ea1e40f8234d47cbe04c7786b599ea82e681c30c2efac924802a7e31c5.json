{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"../../../../Services/user\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"@angular/forms\";\nfunction MenuExamenesComponent_option_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"option\", 10);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const Examenes_r2 = ctx.$implicit;\n    i0.ɵɵproperty(\"value\", Examenes_r2.idTipoDeExamenes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(Examenes_r2.nombreExamen);\n  }\n}\nfunction MenuExamenesComponent_ng_container_32_ng_container_1_ng_container_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const j_r8 = ctx.index;\n    const ctx_r9 = i0.ɵɵnextContext(2);\n    const dato_r3 = ctx_r9.$implicit;\n    const i_r4 = ctx_r9.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(dato_r3[i_r4 + j_r8 + 1]);\n  }\n}\nconst _c0 = function () {\n  return [0, 1, 2];\n};\nfunction MenuExamenesComponent_ng_container_32_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵtemplate(2, MenuExamenesComponent_ng_container_32_ng_container_1_ng_container_2_Template, 3, 1, \"ng-container\", 9);\n    i0.ɵɵelementStart(3, \"td\")(4, \"input\", 12);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuExamenesComponent_ng_container_32_ng_container_1_Template_input_ngModelChange_4_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext();\n      const dato_r3 = ctx_r11.$implicit;\n      const i_r4 = ctx_r11.index;\n      return i0.ɵɵresetView(dato_r3[i_r4] = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"input\", 13);\n    i0.ɵɵlistener(\"ngModelChange\", function MenuExamenesComponent_ng_container_32_ng_container_1_Template_input_ngModelChange_5_listener($event) {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext();\n      const dato_r3 = ctx_r14.$implicit;\n      const i_r4 = ctx_r14.index;\n      return i0.ɵɵresetView(dato_r3[i_r4 + 2] = $event);\n    });\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"td\")(7, \"button\", 14);\n    i0.ɵɵlistener(\"click\", function MenuExamenesComponent_ng_container_32_ng_container_1_Template_button_click_7_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r16 = i0.ɵɵnextContext();\n      const dato_r3 = ctx_r16.$implicit;\n      const i_r4 = ctx_r16.index;\n      const ctx_r15 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r15.editarEspecialidad(dato_r3[i_r4], dato_r3[i_r4 + 2]));\n    });\n    i0.ɵɵtext(8, \"Guardar\");\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r17 = i0.ɵɵnextContext();\n    const dato_r3 = ctx_r17.$implicit;\n    const i_r4 = ctx_r17.index;\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngForOf\", i0.ɵɵpureFunction0(3, _c0));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngModel\", dato_r3[i_r4]);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngModel\", dato_r3[i_r4 + 2]);\n  }\n}\nfunction MenuExamenesComponent_ng_container_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, MenuExamenesComponent_ng_container_32_ng_container_1_Template, 9, 4, \"ng-container\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const i_r4 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", i_r4 % 4 === 0);\n  }\n}\nexport class MenuExamenesComponent {\n  constructor(http, UserService) {\n    this.http = http;\n    this.UserService = UserService;\n    this.Examenes = [];\n    this.examenesAgregados = [];\n    this.inputValue = 0;\n  }\n  //cargar examenes al select y tabla:\n  ngOnInit() {\n    this.getExamenes().subscribe(examenes => {\n      this.Examenes = examenes;\n    });\n    this.getExamenesAsignados().subscribe(info => {\n      this.examenesAgregados = info;\n    });\n  }\n  //metodo para conseguir los examenes:\n  getExamenes() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorDeExamenes?accion=obtenerExamenes';\n    return this.http.get(url);\n  }\n  //metodo para conseguir los examenes asignados:\n  getExamenesAsignados() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=obtenerExamenesAsignados&IdLab=' + this.UserService.getId();\n    return this.http.get(url);\n  }\n  editarEspecialidad(id, precio) {\n    // Aquí puedes hacer lo que necesites con el id y el precio\n    const Id = id;\n    const Precio = precio;\n    const body = {\n      Precio: precio\n    };\n    this.http.put(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=ActualizarPrecio&IdExamen=${Id}&Precio=${Precio}`, body).subscribe(response => {\n      alert('examen editado correctamente.');\n      this.ngOnInit();\n      // Actualizar la lista de especialidades agregadas\n    }, error => {\n      if (error.status === 400) {\n        alert('Error al editar el exámen: el ID ingresado no es válido.');\n      } else {\n        alert('Error al editar la exámen');\n      }\n    });\n  }\n  //metodo para enviar solicitud de un nuevo examen:\n  EnviarSolicitudExamen() {\n    const precio = this.inputValue;\n    const nombre = this.selectedOption;\n    const IdMedico = this.UserService.getId();\n    const body = {\n      Precio: precio,\n      Nombre: this.selectedOption\n    };\n    this.http.post(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=CrearSolicitud&IdExamen=${nombre}&Precio=${precio}&IdMedico=${IdMedico}`, body).subscribe(response => {\n      alert('Solicitud enviada correctamente.');\n      this.ngOnInit();\n      // Actualizar la lista de especialidades agregadas\n    }, error => {\n      if (error.status === 400) {\n        alert('No se encontro el Examen pedido');\n      } else if (error.status === 409) {\n        alert('No puedes pedir una solicitud de un Examen con la que ya cuentas o tienes solicitud pendiente');\n      }\n    });\n  }\n}\nMenuExamenesComponent.ɵfac = function MenuExamenesComponent_Factory(t) {\n  return new (t || MenuExamenesComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.UserService));\n};\nMenuExamenesComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MenuExamenesComponent,\n  selectors: [[\"app-menu-examenes\"]],\n  decls: 33,\n  vars: 4,\n  consts: [[1, \"container\"], [1, \"principal\"], [1, \"form-group\"], [\"for\", \"especialidad\"], [\"name\", \"selectedOption\", 3, \"ngModel\", \"ngModelChange\"], [3, \"value\", 4, \"ngFor\", \"ngForOf\"], [\"for\", \"precio\"], [\"type\", \"number\", \"id\", \"precio\", \"min\", \"0\", \"name\", \"inputValue\", 1, \"form-control\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"submit\", 1, \"btn\", \"btn-primary\", 3, \"click\"], [4, \"ngFor\", \"ngForOf\"], [3, \"value\"], [4, \"ngIf\"], [\"type\", \"hidden\", \"name\", \"id\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"number\", \"name\", \"precio\", 1, \"Edit\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 1, \"btn\", \"btn-primary\", 3, \"click\"]],\n  template: function MenuExamenesComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1)(2, \"h2\");\n      i0.ɵɵtext(3, \"Enviar solicitud de nuevo Examen\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"form\")(5, \"div\", 2)(6, \"label\", 3);\n      i0.ɵɵtext(7, \"Examen\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(8, \"select\", 4);\n      i0.ɵɵlistener(\"ngModelChange\", function MenuExamenesComponent_Template_select_ngModelChange_8_listener($event) {\n        return ctx.selectedOption = $event;\n      });\n      i0.ɵɵtemplate(9, MenuExamenesComponent_option_9_Template, 2, 2, \"option\", 5);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(10, \"label\", 6);\n      i0.ɵɵtext(11, \"Precio por examen:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 7);\n      i0.ɵɵlistener(\"ngModelChange\", function MenuExamenesComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.inputValue = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"button\", 8);\n      i0.ɵɵlistener(\"click\", function MenuExamenesComponent_Template_button_click_13_listener() {\n        return ctx.EnviarSolicitudExamen();\n      });\n      i0.ɵɵtext(14, \"Agregar Examen\");\n      i0.ɵɵelementEnd()()()();\n      i0.ɵɵelementStart(15, \"div\", 1)(16, \"h2\");\n      i0.ɵɵtext(17, \"Examenes Agregados\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"table\")(19, \"thead\")(20, \"tr\")(21, \"th\");\n      i0.ɵɵtext(22, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"th\");\n      i0.ɵɵtext(24, \"Precio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(25, \"th\");\n      i0.ɵɵtext(26, \"Estado\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(27, \"th\");\n      i0.ɵɵtext(28, \"Nuevo Precio\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(29, \"th\");\n      i0.ɵɵtext(30, \"Guardar\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵelementStart(31, \"tbody\");\n      i0.ɵɵtemplate(32, MenuExamenesComponent_ng_container_32_Template, 2, 1, \"ng-container\", 9);\n      i0.ɵɵelementEnd()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(8);\n      i0.ɵɵproperty(\"ngModel\", ctx.selectedOption);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.Examenes);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.inputValue);\n      i0.ɵɵadvance(20);\n      i0.ɵɵproperty(\"ngForOf\", ctx.examenesAgregados);\n    }\n  },\n  dependencies: [i3.NgForOf, i3.NgIf, i4.ɵNgNoValidate, i4.NgSelectOption, i4.ɵNgSelectMultipleOption, i4.DefaultValueAccessor, i4.NumberValueAccessor, i4.SelectControlValueAccessor, i4.NgControlStatus, i4.NgControlStatusGroup, i4.MinValidator, i4.NgModel, i4.NgForm],\n  styles: [\"a[_ngcontent-%COMP%]{\\r\\n    text-decoration: none;\\r\\n}\\r\\nlabel[_ngcontent-%COMP%]{\\r\\n    font-size: xx-large;\\r\\n}\\r\\nselect[_ngcontent-%COMP%]{\\r\\n    padding: 10px;\\r\\n    margin-bottom: 20px;\\r\\n    width: 100%;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 5px;\\r\\n    border: 2px solid black;\\r\\n}\\r\\ninput[_ngcontent-%COMP%]{\\r\\n    padding: 5px;\\r\\n    margin-bottom: 10px;\\r\\n    width: 50%;\\r\\n    border-radius: 5px;\\r\\n    border: 2px solid black;\\r\\n}\\r\\nbutton[_ngcontent-%COMP%] {\\r\\n    padding: 10px 20px;\\r\\n    border: none;\\r\\n    border-radius: 5px;\\r\\n    color: #000000;\\r\\n    cursor: pointer;\\r\\n    transition: all 0.3s ease;\\r\\n    background-color: rgb(246, 255, 123);\\r\\n    border: 2px solid black;\\r\\n  }\\r\\n.form-group[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    padding-left: 10px;\\r\\n    padding-right: 10px;\\r\\n    justify-content: space-between;\\r\\n}\\r\\ntable[_ngcontent-%COMP%] {\\r\\n    width: 100%;\\r\\n    border-collapse: collapse;\\r\\n    margin-bottom: 20px;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%], td[_ngcontent-%COMP%] {\\r\\n    padding: 10px;\\r\\n    text-align: left;\\r\\n    border-bottom: 1px solid #ddd;\\r\\n    border: 2px solid black;\\r\\n  }\\r\\n  \\r\\n  th[_ngcontent-%COMP%] {\\r\\n    font-weight: bold;\\r\\n    background-color: #fdcc8df4;\\r\\n  }\\r\\n  tr[_ngcontent-%COMP%]{\\r\\n    background-color: #f5f5f5;\\r\\n  }\\r\\n  tr[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #949393;\\r\\n  }\\r\\n  \\r\\n.principal[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: column;\\r\\n    align-items: center;\\r\\n    text-align: center;    \\r\\n    background-color: #fdcc8df4;\\r\\n    border: 5px solid black;\\r\\n  }\\r\\n  .container[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    flex-direction: row;\\r\\n    align-items: center;\\r\\n    text-align: center;   \\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvQ29tcG9uZW50ZXMvaG9tZS1sYWJvcmF0b3Jpb3MvbWVudS1leGFtZW5lcy9tZW51LWV4YW1lbmVzLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBO0lBQ0kscUJBQXFCO0FBQ3pCO0FBQ0E7SUFDSSxtQkFBbUI7QUFDdkI7QUFDQTtJQUNJLGFBQWE7SUFDYixtQkFBbUI7SUFDbkIsV0FBVztJQUNYLHNCQUFzQjtJQUN0QixrQkFBa0I7SUFDbEIsdUJBQXVCO0FBQzNCO0FBQ0E7SUFDSSxZQUFZO0lBQ1osbUJBQW1CO0lBQ25CLFVBQVU7SUFDVixrQkFBa0I7SUFDbEIsdUJBQXVCO0FBQzNCO0FBQ0E7SUFDSSxrQkFBa0I7SUFDbEIsWUFBWTtJQUNaLGtCQUFrQjtJQUNsQixjQUFjO0lBQ2QsZUFBZTtJQUNmLHlCQUF5QjtJQUN6QixvQ0FBb0M7SUFDcEMsdUJBQXVCO0VBQ3pCO0FBQ0Y7SUFDSSxhQUFhO0lBQ2Isc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsbUJBQW1CO0lBQ25CLDhCQUE4QjtBQUNsQztBQUNBO0lBQ0ksV0FBVztJQUNYLHlCQUF5QjtJQUN6QixtQkFBbUI7RUFDckI7O0VBRUE7SUFDRSxhQUFhO0lBQ2IsZ0JBQWdCO0lBQ2hCLDZCQUE2QjtJQUM3Qix1QkFBdUI7RUFDekI7O0VBRUE7SUFDRSxpQkFBaUI7SUFDakIsMkJBQTJCO0VBQzdCO0VBQ0E7SUFDRSx5QkFBeUI7RUFDM0I7RUFDQTtJQUNFLHlCQUF5QjtFQUMzQjs7QUFFRjtJQUNJLGFBQWE7SUFDYix1QkFBdUI7SUFDdkIsc0JBQXNCO0lBQ3RCLG1CQUFtQjtJQUNuQixrQkFBa0I7SUFDbEIsMkJBQTJCO0lBQzNCLHVCQUF1QjtFQUN6QjtFQUNBO0lBQ0UsYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsbUJBQW1CO0lBQ25CLGtCQUFrQjtFQUNwQiIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5he1xyXG4gICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xyXG59XHJcbmxhYmVse1xyXG4gICAgZm9udC1zaXplOiB4eC1sYXJnZTtcclxufVxyXG5zZWxlY3R7XHJcbiAgICBwYWRkaW5nOiAxMHB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgIGJvcmRlci1yYWRpdXM6IDVweDtcclxuICAgIGJvcmRlcjogMnB4IHNvbGlkIGJsYWNrO1xyXG59XHJcbmlucHV0e1xyXG4gICAgcGFkZGluZzogNXB4O1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMTBweDtcclxuICAgIHdpZHRoOiA1MCU7XHJcbiAgICBib3JkZXItcmFkaXVzOiA1cHg7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcclxufVxyXG5idXR0b24ge1xyXG4gICAgcGFkZGluZzogMTBweCAyMHB4O1xyXG4gICAgYm9yZGVyOiBub25lO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgY29sb3I6ICMwMDAwMDA7XHJcbiAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICB0cmFuc2l0aW9uOiBhbGwgMC4zcyBlYXNlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmdiKDI0NiwgMjU1LCAxMjMpO1xyXG4gICAgYm9yZGVyOiAycHggc29saWQgYmxhY2s7XHJcbiAgfVxyXG4uZm9ybS1ncm91cHtcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHBhZGRpbmctbGVmdDogMTBweDtcclxuICAgIHBhZGRpbmctcmlnaHQ6IDEwcHg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbn1cclxudGFibGUge1xyXG4gICAgd2lkdGg6IDEwMCU7XHJcbiAgICBib3JkZXItY29sbGFwc2U6IGNvbGxhcHNlO1xyXG4gICAgbWFyZ2luLWJvdHRvbTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgdGgsIHRkIHtcclxuICAgIHBhZGRpbmc6IDEwcHg7XHJcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xyXG4gICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkICNkZGQ7XHJcbiAgICBib3JkZXI6IDJweCBzb2xpZCBibGFjaztcclxuICB9XHJcbiAgXHJcbiAgdGgge1xyXG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRjYzhkZjQ7XHJcbiAgfVxyXG4gIHRye1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogI2Y1ZjVmNTtcclxuICB9XHJcbiAgdHI6aG92ZXIge1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzk0OTM5MztcclxuICB9XHJcbiAgXHJcbi5wcmluY2lwYWx7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgIHRleHQtYWxpZ246IGNlbnRlcjsgICAgXHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZmRjYzhkZjQ7XHJcbiAgICBib3JkZXI6IDVweCBzb2xpZCBibGFjaztcclxuICB9XHJcbiAgLmNvbnRhaW5lcntcclxuICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcclxuICAgIGZsZXgtZGlyZWN0aW9uOiByb3c7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgdGV4dC1hbGlnbjogY2VudGVyOyAgIFxyXG4gIH1cclxuIl0sInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":"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","names":["i0","MenuExamenesComponent","constructor","http","UserService","ngOnInit","getExamenes","subscribe","examenes","Examenes","getExamenesAsignados","info","examenesAgregados","url","get","getId","editarEspecialidad","id","precio","Id","Precio","body","put","response","alert","error","status","EnviarSolicitudExamen","inputValue","nombre","selectedOption","IdMedico","Nombre","post","selectors","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["C:\\Users\\branp\\Documents\\NetBeansProjects\\Proyecto2Clinica\\src\\main\\Angular\\ProyectoMedic\\src\\app\\Componentes\\home-laboratorios\\menu-examenes\\menu-examenes.component.html","C:\\Users\\branp\\Documents\\NetBeansProjects\\Proyecto2Clinica\\src\\main\\Angular\\ProyectoMedic\\src\\app\\Componentes\\home-laboratorios\\menu-examenes\\menu-examenes.component.ts"],"sourcesContent":["<div class=\"container\">\r\n<div class=\"principal\">\r\n    <h2>Enviar solicitud de nuevo Examen</h2>\r\n    <form>\r\n      <div class=\"form-group\">\r\n        <label for=\"especialidad\">Examen</label>\r\n        <select name=\"selectedOption\" [(ngModel)]=\"selectedOption\">\r\n          <option *ngFor=\"let Examenes of Examenes\" [value]=\"Examenes.idTipoDeExamenes\">{{Examenes.nombreExamen}}</option>\r\n        </select>\r\n        <label for=\"precio\">Precio por examen:</label>\r\n        <input type=\"number\" class=\"form-control \" id=\"precio\" min=\"0\" name=\"inputValue\" [(ngModel)]=\"inputValue\">\r\n        <button type=\"submit\" class=\"btn btn-primary\" (click)=\"EnviarSolicitudExamen()\">Agregar Examen</button>\r\n      </div>\r\n    </form>\r\n</div>\r\n<div class=\"principal\">\r\n  <h2>Examenes Agregados</h2>\r\n  <table>\r\n    <thead>\r\n      <tr>\r\n        <th>Nombre</th>\r\n        <th>Precio</th>\r\n        <th>Estado</th>\r\n        <th>Nuevo Precio</th>\r\n        <th>Guardar</th>\r\n      </tr>\r\n    </thead>\r\n    <tbody>\r\n        <ng-container *ngFor=\"let dato of examenesAgregados; let i = index;\">\r\n            <ng-container *ngIf=\"i % 4 === 0\">\r\n              <tr>\r\n                <ng-container *ngFor=\"let columna of [0, 1, 2]; let j = index;\">\r\n                  <td>{{ dato[i+j+1] }}</td>\r\n                </ng-container>\r\n                <td>\r\n                  <input type=\"hidden\" [(ngModel)]=\"dato[i]\" name=\"id\">\r\n                  <input class=\"Edit\" type=\"number\" [(ngModel)]=\"dato[i+2]\" name=\"precio\">\r\n                </td>\r\n                <td>\r\n                  <button type=\"button\" class=\"btn btn-primary\" (click)=\"editarEspecialidad(dato[i], dato[i+2])\">Guardar</button>\r\n                </td>\r\n              </tr>\r\n            </ng-container>\r\n          </ng-container>\r\n    </tbody>\r\n  </table>\r\n</div>\r\n</div>","import { Component } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { UserService } from '../../../../Services/user';\n@Component({\n  selector: 'app-menu-examenes',\n  templateUrl: './menu-examenes.component.html',\n  styleUrls: ['./menu-examenes.component.css']\n})\nexport class MenuExamenesComponent {\n  Examenes: any[] = [];\n  examenesAgregados: any[] = [];\n  selectedOption: any;\n  inputValue: number = 0;\n  constructor(private http: HttpClient , private UserService: UserService  ) { }\n  //cargar examenes al select y tabla:\n  ngOnInit() : void  {\n    this.getExamenes().subscribe(examenes => {\n      this.Examenes = examenes;\n    })\n    this.getExamenesAsignados().subscribe(info => {\n      this.examenesAgregados = info;\n    })\n  }\n  //metodo para conseguir los examenes:\n  getExamenes() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorDeExamenes?accion=obtenerExamenes';\n    return this.http.get<any[]>(url);\n  }\n  //metodo para conseguir los examenes asignados:\n  getExamenesAsignados() {\n    const url = 'http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=obtenerExamenesAsignados&IdLab='+this.UserService.getId();\n    return this.http.get<any[]>(url);\n  }\n  editarEspecialidad(id: string, precio: string) {\n    // Aquí puedes hacer lo que necesites con el id y el precio\n    const Id = id;\n    const Precio = precio;\n    const body = { Precio: precio };\n    this.http.put(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=ActualizarPrecio&IdExamen=${Id}&Precio=${Precio}`, body).subscribe(\n      response => {\n        alert('examen editado correctamente.');\n        this.ngOnInit();\n        // Actualizar la lista de especialidades agregadas\n      },\n      error => {\n        if (error.status === 400) {\n          alert('Error al editar el exámen: el ID ingresado no es válido.');\n        } else {\n          alert('Error al editar la exámen');\n        }\n      }\n    );\n  }\n\n  //metodo para enviar solicitud de un nuevo examen:\n  EnviarSolicitudExamen(){\n    const precio = this.inputValue;\n    const nombre = this.selectedOption;\n    const IdMedico = this.UserService.getId();\n    const body = { Precio: precio, Nombre: this.selectedOption};\n    this.http.post(`http://localhost:8080/Proyecto2Clinica/ControladorExamenesLaboratorios?accion=CrearSolicitud&IdExamen=${nombre}&Precio=${precio}&IdMedico=${IdMedico}`, body).subscribe(\n      response => {\n        alert('Solicitud enviada correctamente.');\n        this.ngOnInit();\n        // Actualizar la lista de especialidades agregadas\n      },\n      error => {\n        if (error.status === 400) {\n          alert('No se encontro el Examen pedido');\n        } else if(error.status === 409) {\n          alert('No puedes pedir una solicitud de un Examen con la que ya cuentas o tienes solicitud pendiente');\n        }\n      }\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}